{% import "../partials/_postList.njk" as postList %}

{% set pageType = 'home' %}

{% extends "layouts/base.njk" %}

{% block head %}
<script>
function openExcerpt(toggle, id) {
  var elem = document.getElementById(id);

  toggle.classList.toggle("plus-minus-toggle");

  if (elem.style.maxHeight === "0px") {
    elem.style.maxHeight = elem.scrollHeight + "px";
  } else {
    elem.style.maxHeight = "0px";
  }
}
</script>
{% endblock %}

{% block content %}
{{ content | safe }}
{# research section #}
<section class="pb-8 mb-8 border-b">
  <h4 class="font-bold">Research Projects</h4>
  <div class="flex flex-wrap -mx-2">
    {% for project in collections.research | reverse %}
      {% if project.fileSlug !== "summary" %}
        <a href="/research#{{ project.data.title | slug }}" class="group w-1/2 sm:w-1/4 p-4">
          <div class="border hover:border-black p-2 rounded-sm h-full flex flex-col">
            <div><p class="group-hover:underline leading-tight font-medium">{{ project.data.title }}</p></div>
            <div class="flex flex-col justify-center flex-grow">
              <figure class="w-full relative m-0" style="padding-top:100%">
                <img class="absolute w-full h-full inset-0 m-0 object-contain" src="{{ project.data.image }}">
              </figure>
            </div>
          </div>
        </a>
      {% endif %}
    {%- endfor %}
  </div>
</section>
{# posts section #}
<section>
  <h4 class="font-bold">Latest Posts</h4>
  <ol class="ml-0">
    {{ postList.display(collections.postsLatest) }}
  </ol>
</section>
{% endblock %}
